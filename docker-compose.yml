version: '3.8'\n\nservices:\n  base-python:\n    build:\n      context: ./base_python_docker\n      dockerfile: Dockerfile\n    image: solnai/base-python:latest\n\n  archon:\n    build:\n      context: ./Archon\n      dockerfile: Dockerfile\n    image: solnai/archon:latest\n    env_file:\n      - ./Archon/.env\n    ports:\n      - "8001:8000"\n    deploy:\n      resources:\n        limits:\n          cpus: '0.50'\n          memory: 512M\n        reservations:\n          cpus: '0.25'\n          memory: 256M\n    healthcheck:\n      test: ["CMD", "curl", "-f", "http://localhost:8000/health"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n    networks:\n      - agent_network\n\n  tinydm-agent:\n    build:\n      context: ./TinyDM-agent\n      dockerfile: Dockerfile\n    image: solnai/tinydm-agent:latest\n    env_file:\n      - ./TinyDM-agent/.env\n    ports:\n      - "8002:8000"\n    deploy:\n      resources:\n        limits:\n          cpus: '0.50'\n          memory: 512M\n        reservations:\n          cpus: '0.25'\n          memory: 256M\n    healthcheck:\n      test: ["CMD", "curl", "-f", "http://localhost:8000/health"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n    networks:\n      - agent_network\n\n  ask-reddit-agent:\n    build:\n      context: ./ask-reddit-agent\n      dockerfile: Dockerfile\n    image: solnai/ask-reddit-agent:latest\n    env_file:\n      - ./ask-reddit-agent/.env\n    ports:\n      - "8003:8000"\n    deploy:\n      resources:\n        limits:\n          cpus: '0.50'\n          memory: 512M\n        reservations:\n          cpus: '0.25'\n          memory: 256M\n    healthcheck:\n      test: ["CMD", "curl", "-f", "http://localhost:8000/health"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n    networks:\n      - agent_network\n\nnetworks:\n  agent_network:\n    driver: bridge\n\nvolumes:\n  postgres_data:\n
